#!/bin/bash

make_cpp()
{
    g++ -O2 -fPIC -c -I$CASADI -o sxInterface.o sxInterface.cpp
}

make_hs()
{
    ghc -pgml g++ -O2 --make SX.hs sxInterface.o $CASADI/build/casadi/CMakeFiles/casadi.dir/matrix/crs_sparsity.o $CASADI/build/casadi/CMakeFiles/casadi.dir/matrix/slice.o $CASADI/build/casadi/CMakeFiles/casadi.dir/matrix/sparsity_tools.o $CASADI/build/casadi/CMakeFiles/casadi.dir/matrix/matrix_tools.o $CASADI/build/casadi/CMakeFiles/casadi.dir/sx/sx.o $CASADI/build/casadi/CMakeFiles/casadi.dir/sx/sx_tools.o $CASADI/build/casadi/CMakeFiles/casadi.dir/sx/sx_node.o $CASADI/build/casadi/CMakeFiles/casadi.dir/sx/binary_sx_node.o $CASADI/build/casadi/CMakeFiles/casadi.dir/stl_vector_tools.o $CASADI/build/casadi/CMakeFiles/casadi.dir/mx/multiple_output.o $CASADI/build/casadi/CMakeFiles/casadi.dir/mx/symbolic_mx_node.o $CASADI/build/casadi/CMakeFiles/casadi.dir/mx/if_else_node.o $CASADI/build/casadi/CMakeFiles/casadi.dir/mx/unary_op.o $CASADI/build/casadi/CMakeFiles/casadi.dir/mx/jacobian_reference.o $CASADI/build/casadi/CMakeFiles/casadi.dir/mx/norm.o $CASADI/build/casadi/CMakeFiles/casadi.dir/mx/mx_tools.o $CASADI/build/casadi/CMakeFiles/casadi.dir/mx/mapping.o $CASADI/build/casadi/CMakeFiles/casadi.dir/mx/multiplication.o $CASADI/build/casadi/CMakeFiles/casadi.dir/mx/binary_op.o $CASADI/build/casadi/CMakeFiles/casadi.dir/mx/densification.o $CASADI/build/casadi/CMakeFiles/casadi.dir/mx/evaluation.o $CASADI/build/casadi/CMakeFiles/casadi.dir/mx/mx_constant.o $CASADI/build/casadi/CMakeFiles/casadi.dir/mx/inverse_mapping.o $CASADI/build/casadi/CMakeFiles/casadi.dir/mx/mx_node.o $CASADI/build/casadi/CMakeFiles/casadi.dir/mx/mx.o $CASADI/build/casadi/CMakeFiles/casadi.dir/shared_object.o $CASADI/build/casadi/CMakeFiles/casadi.dir/printable_object.o $CASADI/build/casadi/CMakeFiles/casadi.dir/options_functionality.o $CASADI/build/casadi/CMakeFiles/casadi.dir/pre_c99_support.o $CASADI/build/casadi/CMakeFiles/casadi.dir/generic_type.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/linear_solver_internal.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/integrator.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/x_function_internal.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/x_function.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/fx.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/integrator_internal.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/function_io.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/ocp_solver.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/c_function_internal.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/jacobian.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/c_function.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/external_function_internal.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/linear_solver.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/ocp_solver_internal.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/simulator.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/external_function.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/implicit_function.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/mx_function_internal.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/fx_tools.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/jacobian_internal.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/qp_solver_internal.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/sx_function.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/simulator_internal.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/sx_function_internal.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/parallelizer_internal.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/nlp_solver.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/mx_function.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/parallelizer.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/implicit_function_internal.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/qp_solver.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/fx_internal.o $CASADI/build/casadi/CMakeFiles/casadi.dir/fx/nlp_solver_internal.o $CASADI/build/casadi/CMakeFiles/casadi.dir/generic_type_internal.o

#ghc -pgml g++ -optl -pg -O2 --make FfiTest.hs cpp_interface.o casadiInterface.o
}


echo "---------- building cpp ----------" && \
    make_cpp && \
    echo "---------- cpp build successful!! ----------" && echo "" && \
    echo "---------- making haskell ----------" && \
    make_hs && \
    echo "---------- haskell build successful!! ----------"
